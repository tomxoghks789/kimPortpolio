<!DOCTYPE html>
<html lang="en">
<head>
<title>김태환의 포트폴리오</title>
<link rel="shortcut icon" href="./images/favicon.ico" type="image/x-icon">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta property="og:title" content="안녕하세요 김태환의 포트폴리오입니다!"/>
<meta property="og:description" content="Kim Tae Hwan's Portfolio"/>
<meta property="og:image" content="./images/showimage.png"/>
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/magnific-popup.css">
<link rel="stylesheet" href="css/font-awesome.min.css">
<!-- MAIN CSS -->
<link rel="stylesheet" href="css/templatemo-style.css">
<link rel="stylesheet" href="css/kimcustom.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/vs2015.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script> <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>

<!-- PRE LOADER -->
<section class="preloader">
  <div class="spinner"> <span class="spinner-rotate"></span> </div>
</section>

<!-- MENU -->
<section class="navbar custom-navbar navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> <span class="icon icon-bar"></span> <span class="icon icon-bar"></span> <span class="icon icon-bar"></span> </button>
      
      <!-- lOGO TEXT HERE --> 
      <a href="index.html" class="navbar-brand"><b>김태환의 포트폴리오</b></a> </div>
    
    <!-- MENU LINKS -->
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-nav-first">
        <li><a href="index.html#home" class="smoothScroll">Home</a></li>
        <li><a href="index.html#about" class="smoothScroll">About me</a></li>
        <li><a href="index.html#blog" class="smoothScroll">My work</a></li>
        <li><a href="index.html#work" class="smoothScroll">Paper & award</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://github.com/tomxoghks789?tab=repositories"><i class="fa fa-github"></i></a></li>
        <li><a href="https://laruma.tistory.com/" class="smoothScroll"><img src="images/tistory.png" alt="" class="white"/><img src="images/tistoryover.png" alt="" class="red"/><img src="images/tistoryblack.png" alt="" class="black"/></a></li>
      </ul>
    </div>
  </div>
</section>

<!-- BLOG HEADER -->
<section id="blog-header" data-stellar-background-ratio="0.5">
  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-md-offset-1 col-md-5 col-sm-12">
        <h2><b>상상을 현실로 이뤄내는 일을 하는<br>
          개발자를 꿈꿉니다</b></h2>
      </div>
    </div>
  </div>
</section>

<!-- BLOG DETAIL -->
<section id="blog-detail" data-stellar-background-ratio="0.5">
  <div class="container">
    <div class="row">
      <div class="col-md-offset-1 col-md-10 col-sm-12"> 
        <!-- BLOG THUMB -->
        <div class="blog-detail-thumb">
          <div class="blog-image"> <img src="images/blog-detail-image.jpg" class="img-responsive" alt="Blog Image"> </div>
          <h2>버스 정류소 조회 앱</h2>
          <p>개인 프로젝트로 서울 버스정보 오픈API를 활용하여 정류소 및 버스 정보 조회하는 기능을 합니다.<br>
          </p>
          <p>이 프로젝트에 적용된 기술은 아래와 같습니다.<br>
          </p>
          <ul>
            <li>Java</li>
            <li>Android</li>
            <li>SQLite</li>
            <li>서울 버스정보 오픈API</li>
            <li>XML</li>
          </ul>
          <br>
        </div>
        <img src="images/b1.png" width="30%" alt=""/><img src="images/b2.png" width="30%" alt=""/>
        <p><br>
          왼쪽부터 앱의 메인화면과 정류소 클릭 시 나오는 화면 앱의 메인에서는 GPS에서 위치정보를 수신하여 주변 정류소 위치를 API에 요청하고 XML로 데이터를 받아 위치정보를 Parsing하여 Google Map API를 활용해 화면에 Pin을 출력한다. 정류소를 클릭하면 해당하는 정류소에 정거하는 버스들의 넘버와 남은 시간과 남은 정거장 수를 출력해준다.<br>
          <br>
        </p>
        <img src="images/b3.png" width="30%" alt=""/><img src="images/b4.png" width="30%" alt=""/>
        <p><br>
          SQLite를 활용하여 즐겨찾기를 추가할 수 있으며 메인화면에서 조회가 가능하고 즐겨찾기 탭에서 클릭하여 즐겨찾기를 삭제 할 수도 있다.<br>
        </p>
        <p>각각의 Station은 Station 클래스를 만들어 관리하였다.<br>
        </p>
        <pre><code class="java">
public class Station
{
	List<String> X = null;
	List<String> Y = null;
	List<String> StationId = null;
	List<String> StationName = null;
	List<String> ReturnData = new ArrayList<String>();

	public Station()
	{
		// TODO Auto-generated constructor stub

	}

	public Station(List<String> X, List<String> Y, List<String> StationId, List<String> StationName)
	{
		// TODO Auto-generated constructor stub
		this.X = X;
		this.Y = Y;
		this.StationId = StationId;
		this.StationName = StationName;
	}

	public List<String> GetDataOf(int Number)
	{
		ReturnData.clear();
		ReturnData.add(X.get(Number));
		ReturnData.add(Y.get(Number));
		ReturnData.add(StationId.get(Number));
		ReturnData.add(StationName.get(Number));
		return ReturnData;
	}

	public int GetLength() // 배열 길이 확인
	{
		if (X == null)
		{
			return 0;
		}
		else
		{
			return X.size();
		}
	}

	public String GetXof(int Number)
	{
		return X.get(Number);
	}

	public String GetYof(int Number)
	{
		return Y.get(Number);
	}

	public String GetStationIdof(int Number)
	{
		return StationId.get(Number);
	}

	public String GetStationNameof(int Number)
	{
		return StationName.get(Number);
	}
	
	public void SetX(List<String> X)
	{
		this.X = X;
	}
	
	public void SetY(List<String> Y)
	{
		this.Y = Y;
	}
	
	public void SetStationId(List<String> StationId)
	{
		this.StationId = StationId;
	}
	
	public void SetStationName(List<String> StationName)
	{
		this.StationName = StationName;
	}
}
</code></pre>
        <p><br>
          API를 통한 정류소 데이터 조회는 다음과 같이 AsyncTask로 구현하였다.<br>
          <br>
        </p>
        <pre><code class="java">
public class BusLineInfoCollector extends AsyncTask<String, String, String>
{
	Context MainCon;
	String parameterBusId = null;
	String tagName = null;
	List<String> StationName = new ArrayList<String>(); // 남은 시간
	List<String> RemainTime = new ArrayList<String>(); // 현재 버스의 위치
	List<String> StationNumberOfBus = new ArrayList<String>(); // 현재 버스의 위치
	List<String> StationNumber = new ArrayList<String>();// 정류소의 위치

	public BusLineInfoCollector(String parameterBusId, Context MainCon)
	{
		// TODO Auto-generated constructor stub
		this.parameterBusId = parameterBusId;
		this.MainCon = MainCon;
	}

	@Override
	protected String doInBackground(String... arg0)
	{
		// TODO Auto-generated method stub
		try
		{
			String addr = "http://ws.bus.go.kr/api/rest/arrive/getArrInfoByRouteAll?ServiceKey=";
			String serviceKey = "SSs6VxFQ%3D"; // 키는 보안을 위해 가렸습니다.
			String parameter = "&busRouteId=" + parameterBusId; // parameterStationId;

			addr = addr + serviceKey + parameter;

			URL url = new URL(addr);
			InputStream in = url.openStream();

			XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
			XmlPullParser parser = factory.newPullParser();

			parser.setInput(in, "UTF-8");

			int eventType = parser.getEventType();

			try
			{

				while (eventType != XmlPullParser.END_DOCUMENT)
				{
					eventType = parser.next();
					tagName = parser.getName();

					if (eventType == XmlPullParser.START_TAG)
					{
						if (tagName.equals("exps1"))
						{
							RemainTime.add(parser.nextText());
						}

						if (tagName.equals("sectOrd1"))
						{
							StationNumberOfBus.add(parser.nextText());
						}
						
						if (tagName.equals("stNm"))
						{
							StationName.add(parser.nextText());
						}
						
						if (tagName.equals("staOrd"))
						{
							StationNumber.add(parser.nextText());
						}
					}
				}
			}
			catch (Exception e)
			{
				
			}
		}
		catch (Exception e)
		{
			
		}

		return null;
	}

	@Override
	protected void onPostExecute(String result)
	{
		// TODO Auto-generated method stub
		super.onPostExecute(result);
		try
		{
			ArrayList<String> CastingArray = new ArrayList<String>(RemainTime.size());
			for (int i = 0; i < RemainTime.size(); i++)
			{
				CastingArray.add(" 이름 : " + StationName.get(i)+"\n" + " 남은시간 : " + Integer.parseInt(RemainTime.get(i)) / 60 + "분" + " 남은 정거장 : " + (Integer.parseInt(StationNumber.get(i)) - Integer.parseInt(StationNumberOfBus.get(i))));
			}
			((ShowBusLine) MainCon).showTheData(CastingArray);
			((ShowBusLine) MainCon).StartTimer();
		}
		catch (Exception e)
		{

		}
	}
}
</code></pre>
      </div>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer data-stellar-background-ratio="0.5">
  <div class="container">
    <div class="row">
      <div class="col-md-12 col-sm-12">
        <div class="footer-bottom">
          <div class="col-md-6 col-sm-5">
            <div class="footer-thumb footer-info">
              <h2>Thank you for watching</h2>
              <p>읽어주셔서 감사합니다.</p>
            </div>
            <div class="copyright-text">
              <p>Copyright &copy; 2020 Kim Tae Hwan's Portfolio</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

<!-- SCRIPTS --> 
<script src="js/jquery.js"></script> 
<script src="js/bootstrap.min.js"></script> 
<script src="js/jquery.stellar.min.js"></script> 
<script src="js/jquery.magnific-popup.min.js"></script> 
<script src="js/smoothscroll.js"></script> 
<script src="js/custom.js"></script>
</body>
</html>